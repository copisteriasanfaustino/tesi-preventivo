<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Modulo Stampa Tesina</title>
  <style>
    body { font-family: sans-serif; margin: 2em; background: #f2f2f2; }
    h2 { margin-top: 0; }
    .form-group { margin-bottom: 1em; }
    label { display: block; font-weight: bold; margin-bottom: 0.5em; }
    input, select { padding: 0.5em; width: 100%; max-width: 400px; }
    #preview { margin-top: 1em; max-width: 400px; }
    #progress { margin-top: 1em; background: #ccc; height: 20px; width: 400px; }
    #progress-inner { background: green; height: 100%; width: 0%; transition: width 0.5s; }
    #result { margin-top: 2em; }
  </style>
</head>
<body>
  <h2>Modulo Stampa Tesina</h2>
  <div class="form-group">
    <label for="pdf">Carica PDF:</label>
    <input type="file" id="pdf" accept="application/pdf" />
  </div>

  <div class="form-group">
    <label for="frontalita">Frontalità:</label>
    <select id="frontalita">
      <option value="solo-fronte">Solo fronte (+€0,03/pagina)</option>
      <option value="fronte-retro">Fronte/Retro</option>
    </select>
  </div>

  <div class="form-group">
    <label for="copertina">Colore Copertina:</label>
    <select id="copertina">
      <!-- Tutti i 41 colori -->
      <option value="arancio">Arancio</option>
      <option value="azzurro">Azzurro</option>
      <option value="blu">Blu</option>
      <option value="bianco">Bianco</option>
      <option value="bordeaux">Bordeaux</option>
      <option value="celeste">Celeste</option>
      <option value="crema">Crema</option>
      <option value="fucsia">Fucsia</option>
      <option value="giallo">Giallo</option>
      <option value="grigio">Grigio</option>
      <option value="lavanda">Lavanda</option>
      <option value="lilla">Lilla</option>
      <option value="marrone">Marrone</option>
      <option value="nero">Nero</option>
      <option value="ocra">Ocra</option>
      <option value="oliva">Oliva</option>
      <option value="oro">Oro</option>
      <option value="panna">Panna</option>
      <option value="pesca">Pesca</option>
      <option value="petrolio">Petrolio</option>
      <option value="porpora">Porpora</option>
      <option value="rosa">Rosa</option>
      <option value="rosso">Rosso</option>
      <option value="sabbia">Sabbia</option>
      <option value="salvia">Salvia</option>
      <option value="senape">Senape</option>
      <option value="tiffany">Tiffany</option>
      <option value="trasparente">Trasparente</option>
      <option value="verde-acido">Verde Acido</option>
      <option value="verde-bandiera">Verde Bandiera</option>
      <option value="verde-bosco">Verde Bosco</option>
      <option value="verde-mela">Verde Mela</option>
      <option value="verde-militare">Verde Militare</option>
      <option value="verde-oliva">Verde Oliva</option>
      <option value="verde-pistacchio">Verde Pistacchio</option>
      <option value="verde-prato">Verde Prato</option>
      <option value="verde-smeraldo">Verde Smeraldo</option>
      <option value="verde-tiffany">Verde Tiffany</option>
      <option value="viola">Viola</option>
      <option value="vinaccia">Vinaccia</option>
    </select>
    <img id="preview" src="" alt="Anteprima copertina" />
  </div>

  <div id="progress">
    <div id="progress-inner"></div>
  </div>

  <div id="result"></div>

  <script>
    const pdfInput = document.getElementById("pdf");
    const copertinaSelect = document.getElementById("copertina");
    const previewImg = document.getElementById("preview");
    const progressInner = document.getElementById("progress-inner");
    const resultDiv = document.getElementById("result");
    const frontalitaSelect = document.getElementById("frontalita");

    copertinaSelect.addEventListener("change", () => {
      const selected = copertinaSelect.value;
      previewImg.src = selected + ".png"; // Assumi che le immagini siano nello stesso folder
    });

    pdfInput.addEventListener("change", () => {
      const file = pdfInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        progressInner.style.width = "100%"; // Mostra progress bar al 100%
        setTimeout(() => {
          const paginaTot = 10; // Puoi sostituire con il conteggio reale
          const soloFronte = frontalitaSelect.value === "solo-fronte";
          const costoPerCopia = soloFronte ? 0.03 : 0.0;
          const prezzo = paginaTot * costoPerCopia;
          resultDiv.innerHTML = `
            <h3>Riepilogo</h3>
            <p>Pagine: ${paginaTot}</p>
            <p>Fronte: ${soloFronte ? "Solo fronte (+€0,03/pagina)" : "Fronte-retro"}</p>
            <p>Prezzo Copia: €${prezzo.toFixed(2)}</p>
            <p>Colore Copertina: ${copertinaSelect.value}</p>
          `;
        }, 1000);
      };
      reader.readAsArrayBuffer(file);
    });
  </script>
</body>
</html>
